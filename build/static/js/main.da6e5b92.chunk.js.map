{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.scss","components/Modal/Modal.module.scss","components/Container/Container.module.scss","components/Loader/Loader.module.scss","components/Button/Button.module.scss","components/ImageGallery/ImageGallery.module.scss","components/Container/Container.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Loader/Loader.js","components/Button/Button.js","services/pixabay-api.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/App/App.js","index.js","components/Searchbar/Searchbar.module.scss"],"names":["module","exports","Container","children","className","s","Searchbar","onSubmit","useState","query","setQuery","SearchForm","e","preventDefault","trim","toast","error","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","value","onChange","target","toLowerCase","defaultProps","propType","PropTypes","func","ImageGalleryItem","webformatURL","onSelect","onClick","src","alt","ImageGalleryItemImage","LoaderContainer","loaderContainer","color","height","width","timeout","Button","api","fetchImage","name","page","url","fetch","then","response","ok","json","data","hits","Promise","reject","Error","Status","ImageGallery","onSelectImage","images","setImages","setPage","status","setStatus","setError","useEffect","onChangeQuery","fetchApi","prevImages","catch","finally","scroll","window","scrollTo","top","document","documentElement","scrollHeight","behavior","Loader","map","id","largeImageURL","length","prevPage","imageName","modalRoot","querySelector","Modal","onClose","selectImage","addEventListener","handleKeyDown","removeEventListener","code","console","log","createPortal","Overlay","currentTarget","App","selectedImage","setSelectedImage","imageUrl","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.da6e5b92.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__Bqz4v\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1Z1Wj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2hXcC\",\"Modal\":\"Modal_Modal__kBxsk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__3MIkC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loaderContainer\":\"Loader_loaderContainer__1DbrW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3lSOp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__26JRs\"};","import PropTypes from \"prop-types\";\r\nimport s from \"./Container.module.scss\";\r\n\r\nconst Container = ({ children }) => {\r\n  return <div className={s.Container}>{children}</div>;\r\n};\r\n\r\nContainer.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n};\r\n\r\nexport default Container;\r\n","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport toast from \"react-hot-toast\";\r\nimport s from \"./Searchbar.module.scss\";\r\n\r\nfunction Searchbar({ onSubmit }) {\r\n  const [query, setQuery] = useState(\"\");\r\n\r\n  const handleChange = (e) => {\r\n    setQuery(e.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (query.trim() === \"\") {\r\n      toast.error(\"enter something\");\r\n      return;\r\n    }\r\n\r\n    // Проп который передается форме для вызова при сабмите\r\n    onSubmit(query);\r\n    setQuery(\"\");\r\n  };\r\n\r\n  return (\r\n    <header className={s.Searchbar}>\r\n      <form className={s.SearchForm} onSubmit={handleSubmit}>\r\n        <button type=\"submit\" className={s.SearchFormButton}>\r\n          <span className={s.SearchFormButtonLabel}>Search</span>\r\n        </button>\r\n        <input\r\n          className={s.SearchFormInput}\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n          value={query}\r\n          onChange={handleChange}\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n\r\nSearchbar.defaultProps = {\r\n  onSubmit: () => null,\r\n};\r\n\r\nSearchbar.propType = {\r\n  onSubmit: PropTypes.func,\r\n};\r\n\r\nexport default Searchbar;\r\n","import PropTypes from \"prop-types\";\r\nimport s from \"./ImageGalleryItem.module.scss\";\r\n\r\nconst ImageGalleryItem = ({ webformatURL, onSelect }) => {\r\n  return (\r\n    <li className={s.ImageGalleryItem} onClick={onSelect}>\r\n      <img src={webformatURL} alt=\"\" className={s.ImageGalleryItemImage} />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.defaultProps = {\r\n  onSelect: () => null,\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string.isRequired,\r\n  onSelect: PropTypes.func,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import Loader from \"react-loader-spinner\";\r\nimport s from \"./Loader.module.scss\";\r\n\r\nconst LoaderContainer = () => {\r\n  return (\r\n    <div className={s.loaderContainer}>\r\n      <Loader\r\n        type=\"Oval\"\r\n        color=\"#3f51b5\"\r\n        height={50}\r\n        width={70}\r\n        timeout={3000}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoaderContainer;\r\n","import s from \"./Button.module.scss\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button type=\"button\" onClick={onClick} className={s.Button}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.defaultProps = {\r\n  onClick: () => null,\r\n};\r\n\r\nButton.propType = {\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nexport default Button;\r\n","function fetchImage(name, page) {\r\n  const BASE_URL = \"https://pixabay.com/api\";\r\n  const API_KEY = \"21721855-87ebe3c583662dfcae4faca3d\";\r\n  const url = `${BASE_URL}/?q=${name}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\r\n  return fetch(url).then((response) => {\r\n    if (response.ok) {\r\n      return response.json().then((data) => data.hits);\r\n    }\r\n\r\n    return Promise.reject(new Error(`No image`));\r\n  });\r\n}\r\n\r\nconst api = {\r\n  fetchImage,\r\n};\r\n\r\nexport default api;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport toast from \"react-hot-toast\";\r\nimport PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\nimport LoaderContainer from \"../Loader/Loader\";\r\nimport Button from \"../Button/Button\";\r\nimport s from \"./ImageGallery.module.scss\";\r\nimport fetchApi from \"../../services/pixabay-api.js\";\r\n\r\nconst Status = {\r\n  IDLE: \"idle\",\r\n  PENDING: \"pending\",\r\n  RESOLVED: \"resolved\",\r\n  REJECTED: \"rejected\",\r\n};\r\n\r\nexport default function ImageGallery({ query, onSelectImage }) {\r\n  const [images, setImages] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [status, setStatus] = useState(Status.IDLE);\r\n  const [, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    onChangeQuery();\r\n  }, [query]);\r\n\r\n  useEffect(() => {\r\n    if (!query) {\r\n      return;\r\n    }\r\n    setStatus(Status.PENDING);\r\n\r\n    fetchApi\r\n      .fetchImage(query, page)\r\n      .then((images) => {\r\n        setImages((prevImages) => [...prevImages, ...images]);\r\n        setStatus(Status.RESOLVED);\r\n      })\r\n      .catch((error) => {\r\n        setError(error);\r\n        setStatus(Status.REJECTED);\r\n      })\r\n      .finally(() => {\r\n        if (page > 1) {\r\n          scroll();\r\n        }\r\n      });\r\n  }, [page, query]);\r\n\r\n  const onChangeQuery = () => {\r\n    setPage(1);\r\n    setImages([]);\r\n    setError(null);\r\n  };\r\n\r\n  const updatePage = () => {\r\n    setPage((prevPage) => prevPage + 1);\r\n  };\r\n\r\n  const scroll = () => {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  if (status === Status.IDLE) {\r\n    return <> </>;\r\n  }\r\n  if (status === Status.PENDING) {\r\n    return <LoaderContainer />;\r\n  }\r\n  if (status === Status.RESOLVED) {\r\n    return (\r\n      <>\r\n        <ul className={s.ImageGallery}>\r\n          {images.map(({ id, webformatURL, largeImageURL }) => (\r\n            <ImageGalleryItem\r\n              key={id}\r\n              webformatURL={webformatURL}\r\n              onSelect={() => onSelectImage(largeImageURL)}\r\n            />\r\n          ))}\r\n        </ul>\r\n        {images.length !== 0 && <Button onClick={updatePage} />}\r\n      </>\r\n    );\r\n  }\r\n  if (status === Status.REJECTED) {\r\n    return toast.error(\"no images for your search\");\r\n  }\r\n}\r\n\r\nImageGallery.defaultProps = {\r\n  imageName: null,\r\n  onSelectImage: () => null,\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      largeImageURL: PropTypes.string.isRequired,\r\n    })\r\n  ),\r\n  imageName: PropTypes.string,\r\n  onSelectImage: PropTypes.func,\r\n};\r\n","import React, { useEffect } from \"react\";\r\n\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./Modal.module.scss\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nfunction Modal({ onClose, selectImage }) {\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handleKeyDown);\r\n    };\r\n  });\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const handleBackdropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  console.log(selectImage);\r\n  return createPortal(\r\n    <div className={s.Overlay} onClick={handleBackdropClick}>\r\n      <div className={s.Modal}>\r\n        <img src={selectImage} alt=\"\" />\r\n      </div>\r\n    </div>,\r\n    modalRoot\r\n  );\r\n}\r\n\r\nModal.defaultProps = {\r\n  onClose: () => null,\r\n};\r\n\r\nModal.propType = {\r\n  onClose: PropTypes.func,\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useState } from \"react\";\nimport { Toaster } from \"react-hot-toast\";\nimport Container from \"../Container/Container\";\nimport Searchbar from \"../Searchbar/Searchbar\";\nimport ImageGallery from \"../ImageGallery/ImageGallery.js\";\nimport Modal from \"../Modal/Modal\";\n\nfunction App() {\n  const [query, setQuery] = useState(\"\");\n  const [selectedImage, setSelectedImage] = useState(\"\");\n\n  const handleFormSubmit = (value) => {\n    setQuery(value);\n  };\n\n  const handleSelectImage = (imageUrl) => {\n    setSelectedImage(imageUrl);\n  };\n\n  const handleCloseModal = () => setSelectedImage(\"\");\n\n  return (\n    <Container>\n      <Searchbar onSubmit={handleFormSubmit} />\n      <ImageGallery query={query} onSelectImage={handleSelectImage} />\n      {selectedImage && (\n        <Modal selectImage={selectedImage} onClose={handleCloseModal} />\n      )}\n      <Toaster position=\"top-right\" />\n    </Container>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"modern-normalize/modern-normalize.css\";\nimport \"./styles/base.module.scss\";\nimport App from \"./components/App/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__yA0Yd\",\"SearchForm\":\"Searchbar_SearchForm__2X4ex\",\"SearchFormButton\":\"Searchbar_SearchFormButton__-46ht\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1FurK\",\"SearchFormInput\":\"Searchbar_SearchFormInput__19DJs\"};"],"sourceRoot":""}